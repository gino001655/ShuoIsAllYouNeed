# å¦‚ä½•é¸æ“‡ï¼šæ–¹æ¡ˆ A vs æ–¹æ¡ˆ B

## ğŸ¤” ä½ çš„æƒ…æ³

ä½ æœ‰ï¼š
- âœ… TADataï¼ˆåŒ…å«æ‰€æœ‰ layer åœ–ç‰‡ï¼ŒImage å°è±¡æ ¼å¼ï¼‰
- âœ… `caption_llava16_final.json`ï¼ˆå®Œæ•´çš„ LLaVA captionsï¼‰
- âœ… Caption æª”åæ˜¯æ•¸å­—ï¼ˆ`00000000.png`, `00000001.png`, ...ï¼‰

## âš¡ å¿«é€Ÿæ±ºç­–

### å¦‚æœä½ æƒ³ **ç«‹å³é–‹å§‹è¨“ç·´/æ¸¬è©¦** â†’ æ–¹æ¡ˆ B â­

```bash
# è¤‡è£½æ–‡ä»¶åˆ° workspace æ©Ÿå™¨
scp tools/dlcv_dataset_indexed.py user@workspace:/workspace/.../tools/
scp infer/infer.py user@workspace:/workspace/.../infer/

# åœ¨ workspace æ©Ÿå™¨åŸ·è¡Œ
chmod +x quick_test_plan_b.sh
./quick_test_plan_b.sh

# é–‹å§‹ inference
python infer/infer.py --config configs/infer_tadata_indexed.json
```

**å„ªé»ï¼š**
- âš¡ ç«‹å³å¯ç”¨ï¼ˆ0 åˆ†é˜ç­‰å¾…ï¼‰
- ğŸ’¾ ä¸ä½”é¡å¤–ç©ºé–“
- ğŸ”„ Caption å®¹æ˜“æ›´æ–°

**ç¼ºé»ï¼š**
- éœ€è¦åŒæ™‚ç¶­è­· TAData + caption.json å…©å€‹æ–‡ä»¶

---

### å¦‚æœä½ æƒ³ **æœ€çµ‚ç™¼å¸ƒç‰ˆæœ¬** â†’ æ–¹æ¡ˆ A

è®“è½‰æ›ç¹¼çºŒè·‘å®Œï¼ˆç´„ 45-50 åˆ†é˜ï¼‰ï¼Œå¾—åˆ°ï¼š

```
TAData_with_llava_captions/
â”œâ”€â”€ preview/           # æ‰€æœ‰åœ–ç‰‡
â”œâ”€â”€ layers/            
â””â”€â”€ train-xxxxx.parquet  # caption å·²å…§åµŒåœ¨ title æ¬„ä½
```

**å„ªé»ï¼š**
- âœ… æ•¸æ“šè‡ªåŒ…å«ï¼ˆåªéœ€è¦ä¸€å€‹ç›®éŒ„ï¼‰
- âœ… è·¨æ©Ÿå™¨å…¼å®¹
- âœ… æ›´ç©©å®šï¼ˆä¸ä¾è³´å¤–éƒ¨ JSONï¼‰

**ç¼ºé»ï¼š**
- â³ éœ€è¦ç­‰å¾…è½‰æ›å®Œæˆ
- ğŸ’¾ éœ€è¦é¡å¤–ç£ç¢Ÿç©ºé–“

---

## ğŸ’¡ å»ºè­°ç­–ç•¥

### ğŸ¯ æœ€ä½³å¯¦è¸

1. **ç¾åœ¨ï¼šç”¨æ–¹æ¡ˆ B é–‹å§‹é–‹ç™¼**
   ```bash
   # ç«‹å³é–‹å§‹æ¸¬è©¦å’Œé–‹ç™¼
   ./quick_test_plan_b.sh
   python infer/infer.py --config configs/infer_tadata_indexed.json --max_samples 10
   ```

2. **åŒæ™‚ï¼šè®“æ–¹æ¡ˆ A çš„è½‰æ›åœ¨èƒŒæ™¯è·‘**
   - è½‰æ›è…³æœ¬ç¹¼çºŒåŸ·è¡Œï¼ˆä¸ç”¨ç®¡å®ƒï¼‰
   - ç´„ 45 åˆ†é˜å¾Œæœƒå®Œæˆ

3. **ä¹‹å¾Œï¼šæ ¹æ“šéœ€æ±‚é¸æ“‡**
   - **é–‹ç™¼/èª¿è©¦ï¼š** ç¹¼çºŒç”¨æ–¹æ¡ˆ B
   - **æœ€çµ‚è¨“ç·´ï¼š** ç”¨æ–¹æ¡ˆ A çš„è½‰æ›çµæœ
   - **ç™¼å¸ƒ/å…±äº«ï¼š** ç”¨æ–¹æ¡ˆ Aï¼ˆæ‰“åŒ…æˆ `.tar.gz`ï¼‰

---

## ğŸ“Š è©³ç´°å°æ¯”

| é …ç›® | æ–¹æ¡ˆ Aï¼ˆè½‰æ›ï¼‰ | æ–¹æ¡ˆ Bï¼ˆIndex-basedï¼‰ |
|------|----------------|----------------------|
| **ç­‰å¾…æ™‚é–“** | 45-50 åˆ†é˜ | 0 ç§’ âš¡ |
| **ç£ç¢Ÿç©ºé–“** | ~2xï¼ˆé‡è¤‡å­˜å„²åœ–ç‰‡ï¼‰ | åŸå§‹å¤§å° ğŸ’¾ |
| **æ•¸æ“šçµæ§‹** | å–®ä¸€ç›®éŒ„ï¼ˆè‡ªåŒ…å«ï¼‰ | TAData + JSON |
| **Caption æ›´æ–°** | éœ€è¦é‡æ–°è½‰æ› | ç›´æ¥æ”¹ JSON ğŸ”„ |
| **è·¨æ©Ÿå™¨ä½¿ç”¨** | ç°¡å–®ï¼ˆåªéœ€è¤‡è£½ä¸€å€‹ç›®éŒ„ï¼‰ | éœ€è¦è¤‡è£½å…©å€‹æ–‡ä»¶ |
| **ç©©å®šæ€§** | é«˜ï¼ˆæ•¸æ“šå…§åµŒï¼‰ | ä¾è³´ JSON æª”æ¡ˆ |
| **é©åˆå ´æ™¯** | æœ€çµ‚è¨“ç·´ã€ç™¼å¸ƒ | é–‹ç™¼ã€æ¸¬è©¦ã€èª¿è©¦ |

---

## ğŸ¬ å¯¦éš›æ“ä½œ

### å ´æ™¯ 1ï¼šæˆ‘æƒ³é¦¬ä¸Šçœ‹åˆ°çµæœ

```bash
# âœ… ç”¨æ–¹æ¡ˆ B
cd /workspace/ShuoIsAllYouNeed/Yao/final/CLD
./quick_test_plan_b.sh

# æ¸¬è©¦ 5 å€‹æ¨£æœ¬
python infer/infer.py \
    --config configs/infer_tadata_indexed.json \
    --max_samples 5
```

**5 åˆ†é˜å…§å°±èƒ½çœ‹åˆ°çµæœï¼**

---

### å ´æ™¯ 2ï¼šæˆ‘è¦é–‹å§‹æ­£å¼è¨“ç·´äº†

```bash
# å¦‚æœè½‰æ›å·²å®Œæˆï¼Œç”¨æ–¹æ¡ˆ A
python train/train.py \
    --data_dir /workspace/dataset/TAData_with_llava_captions \
    ...

# å¦‚æœè½‰æ›é‚„æ²’å®Œæˆï¼Œç”¨æ–¹æ¡ˆ B
python train/train.py \
    --data_dir /workspace/dataset/TAData/DLCV_dataset/data \
    --caption_json /workspace/.../caption_llava16_final.json \
    --use_indexed_dataset true \
    ...
```

---

### å ´æ™¯ 3ï¼šæˆ‘è¦æŠŠæ•¸æ“šçµ¦åˆ¥äººç”¨

```bash
# âœ… ç­‰æ–¹æ¡ˆ A è½‰æ›å®Œæˆå¾Œ

# æ‰“åŒ…
cd /workspace/dataset
tar -czf TAData_with_llava_captions.tar.gz TAData_with_llava_captions/

# å°æ–¹åªéœ€è¦ï¼š
tar -xzf TAData_with_llava_captions.tar.gz
python train/train.py --data_dir TAData_with_llava_captions/
```

**è‡ªåŒ…å«ï¼ä¸éœ€è¦é¡å¤–çš„ JSONï¼**

---

## â“ å¸¸è¦‹å•é¡Œ

### Q: æˆ‘è©²åœæ­¢è½‰æ›å—ï¼Ÿ

**A: ä¸ç”¨ï¼** è®“è½‰æ›ç¹¼çºŒè·‘ï¼ŒåŒæ™‚ä½ å¯ä»¥ç”¨æ–¹æ¡ˆ B é–‹å§‹é–‹ç™¼ã€‚

---

### Q: å…©å€‹æ–¹æ¡ˆå¯ä»¥åŒæ™‚ç”¨å—ï¼Ÿ

**A: å¯ä»¥ï¼** ä½ å¯ä»¥åœ¨ä¸åŒå ´æ™¯ä½¿ç”¨ä¸åŒæ–¹æ¡ˆã€‚åªéœ€è¦åœ¨é…ç½®ä¸­è¨­å®šï¼š
- æ–¹æ¡ˆ A: `"use_indexed_dataset": false`ï¼ˆæˆ–ä¸è¨­å®šï¼‰
- æ–¹æ¡ˆ B: `"use_indexed_dataset": true`

---

### Q: è½‰æ›å®Œæˆå¾Œæœƒæ€æ¨£ï¼Ÿ

**A:** ä½ æœƒå¾—åˆ°ä¸€å€‹æ–°ç›®éŒ„ `TAData_with_llava_captions/`ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ï¼š

```bash
# ç”¨æ–¹æ¡ˆ A çš„è½‰æ›çµæœ
python infer/infer.py \
    --config configs/infer.json \
    --data_dir /workspace/dataset/TAData_with_llava_captions
```

ä¸éœ€è¦ `caption_json`ï¼Œä¸éœ€è¦ `use_indexed_dataset`ï¼

---

### Q: å¦‚æœæˆ‘çš„ caption æœƒç¶“å¸¸ä¿®æ”¹ï¼Ÿ

**A: ç”¨æ–¹æ¡ˆ Bï¼** åªéœ€è¦æ›´æ–° `caption_llava16_final.json`ï¼Œä¸éœ€è¦é‡æ–°è½‰æ›ã€‚

---

### Q: æœ€çµ‚ç™¼å¸ƒç”¨å“ªå€‹ï¼Ÿ

**A: ç”¨æ–¹æ¡ˆ Aï¼** è½‰æ›å¾Œçš„æ•¸æ“šæ›´ç©©å®šã€æ›´æ˜“åˆ†äº«ã€‚

---

## ğŸ¯ ç¸½çµ

### ğŸ‘‰ å»ºè­°è¡Œå‹•

1. **ç¾åœ¨ï¼ˆ0-5 åˆ†é˜ï¼‰ï¼š**
   ```bash
   # åœ¨ workspace æ©Ÿå™¨
   cd /workspace/ShuoIsAllYouNeed/Yao/final/CLD
   chmod +x quick_test_plan_b.sh
   ./quick_test_plan_b.sh
   ```

2. **æ¥ä¸‹ä¾†ï¼ˆ5-45 åˆ†é˜ï¼‰ï¼š**
   - ç”¨æ–¹æ¡ˆ B é–‹å§‹é–‹ç™¼å’Œæ¸¬è©¦
   - è®“è½‰æ›ç¹¼çºŒåœ¨èƒŒæ™¯åŸ·è¡Œ

3. **è½‰æ›å®Œæˆå¾Œï¼ˆ45 åˆ†é˜+ï¼‰ï¼š**
   - é©—è­‰è½‰æ›çµæœï¼š`python verify_converted_dataset.py`
   - åˆ‡æ›åˆ°æ–¹æ¡ˆ A é€²è¡Œæœ€çµ‚è¨“ç·´

### ğŸ‰ å…©å…¨å…¶ç¾ï¼

- **çŸ­æœŸï¼š** æ–¹æ¡ˆ B - ç«‹å³é–‹å§‹å·¥ä½œ
- **é•·æœŸï¼š** æ–¹æ¡ˆ A - ç©©å®šçš„æœ€çµ‚ç‰ˆæœ¬

**ä¸éœ€è¦é¸æ“‡ï¼å…©å€‹éƒ½ç”¨ï¼** ğŸš€
